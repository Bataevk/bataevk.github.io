<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Профессиональный вокальный курс</title>
    <meta name="description" content="От расслабления к силе голоса: интерактивный план на 25 недель для продвинутых учеников.">
    <!-- Bootstrap 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
    <!-- Font Awesome (for icons) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=Montserrat:wght@700&display=swap" rel="stylesheet">
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            /* Light Theme */
            --bg-color-light: #f5f5f7;
            --text-color-light: #1d1d1f;
            --header-color-light: #000000;
            --primary-color-light: #b30c00; /* Deeper Scarlet */
            --card-bg-light: #ffffff;
            --card-border-light: #e8e8ed;
            --subtle-text-light: #6e6e73;
            
            /* Dark Theme */
            --bg-color-dark: #121212;
            --text-color-dark: #e0e0e0;
            --header-color-dark: #ffffff;
            --primary-color-dark: #ff453a; /* Brighter Scarlet for Dark Mode */
            --card-bg-dark: #1e1e1e;
            --card-border-dark: #333333;
            --subtle-text-dark: #a0a0a0;
        }

        /* --- Default Light Theme --- */
        body {
            --bg-color: var(--bg-color-light);
            --text-color: var(--text-color-light);
            --header-color: var(--header-color-light);
            --primary-color: var(--primary-color-light);
            --card-bg: var(--card-bg-light);
            --card-border: var(--card-border-light);
            --subtle-text: var(--subtle-text-light);

            font-family: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            transition: background-color 0.3s, color 0.3s;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        .bg-theme {
            background-color: var(--bg-color);
        }

        /* --- Dark Theme via prefers-color-scheme --- */
        @media (prefers-color-scheme: dark) {
            .bg-theme {
                background-color: var(--bg-color-dark);
            }
            body {
                --bg-color: var(--bg-color-dark);
                --text-color: var(--text-color-dark);
                --header-color: var(--header-color-dark);
                --primary-color: var(--primary-color-dark);
                --card-bg: var(--card-bg-dark);
                --card-border: var(--card-border-dark);
                --subtle-text: var(--subtle-text-dark);
            }
            ::-webkit-scrollbar { width: 8px; }
            ::-webkit-scrollbar-track { background: var(--bg-color); }
            ::-webkit-scrollbar-thumb { background: #444; border-radius: 4px; }
            ::-webkit-scrollbar-thumb:hover { background: #555; }
        }

        /* --- General & Typography --- */
        h1, h2, h3, h4 { font-family: 'Montserrat', sans-serif; color: var(--header-color); font-weight: 700; }
        a { color: var(--primary-color); text-decoration: none; transition: all 0.2s ease-in-out; }
        a:hover { color: var(--header-color); text-decoration: none; }
        p { line-height: 1.6; }
        
        /* --- Layout: Poster Style --- */
        .poster-layout {
            display: flex;
            flex-wrap: wrap;
        }
        #poster-header {
            position: sticky;
            top: 0;
            height: 100vh;
            padding: 3rem 2rem;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }
        #content-main {
            padding: 3rem 2rem;
            padding-left: 0;
        }

        /* Responsive layout */
        @media (max-width: 991.98px) {
            #poster-header {
                position: static;
                height: auto;
                padding-bottom: 1rem;
            }
            #content-main, #poster-header {
                padding: 2rem 1.5rem;
            }
        }

        /* --- Left Poster Panel --- */
        .profile-img {
            width: 120px;
            height: 120px;
            object-fit: cover;
            border-radius: 50%;
            border: 3px solid var(--card-border);
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }
        #poster-header h1 { font-size: 2.5rem; margin-top: 1.5rem; }
        #poster-header .lead { color: var(--text-color); font-size: 1.1rem; }
        #poster-header .bio { color: var(--subtle-text); font-size: 0.95rem; }

        /* --- Right Content Panel --- */
        .content-section h2 { margin-bottom: 1rem; }
        .content-card {
            background-color: var(--card-bg);
            border: 1px solid var(--card-border);
            border-radius: 12px;
            padding: 1.75rem;
            margin-bottom: 1.5rem;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .content-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px -10px rgba(0,0,0,0.15);
        }
        .card-title { color: var(--header-color); font-size: 1.2rem; }
        .card-meta { color: var(--subtle-text); font-size: 0.85rem; margin-bottom: 1rem; }
        
        /* --- Chart --- */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }

        /* --- Animations --- */
        .fade-in-up {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.5s ease-out, transform 0.5s ease-out;
        }
        .fade-in-up.visible { opacity: 1; transform: translateY(0); }

        /* --- Week Selector --- */
        .week-selector .btn {
            width: 40px;
            height: 40px;
            font-size: 0.9rem;
            margin: 0.25rem;
            transition: transform 0.2s;
        }
        .week-selector .btn:hover {
            transform: scale(1.1);
        }
        .active-week {
            background-color: var(--primary-color) !important;
            color: white !important;
            transform: scale(1.1);
        }

        /* --- NEW: TABS STYLES --- */
        .tabs-nav {
            display: flex;
            gap: 1.5rem;
        }
        .tab-link {
            background: none;
            border: none;
            padding: 0.5rem 0.25rem;
            margin-bottom: -1px;
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--subtle-text);
            cursor: pointer;
            transition: color 0.3s ease, border-color 0.3s ease;
            border-bottom: 2px solid transparent;
        }
        .tab-link.active {
            color: var(--primary-color);
            border-bottom-color: var(--primary-color);
        }
        .tabs-content {
            position: relative;
            overflow-y: scroll;
            overflow-x: hidden;
            height: 90%;
        }
        .tab-pane {
            transition: opacity 0.4s ease-in-out, transform 0.4s ease-in-out;
            display: none;
        }
        .tab-pane.active {
            display: block;
        }

        /* Animation classes toggled by JS */
        .tab-pane.exiting {
            opacity: 0;
            transform: translateX(-30px);
        }
        .tab-pane.entering {
            opacity: 0;
            transform: translateX(30px);
        }
    </style>
</head>
<body>

<div class="container-fluid">
    <div class="poster-layout row">

        <!-- ======================= LEFT POSTER PANEL ======================= -->
        <header id="poster-header" class="col-lg-4 px-5 vh-100">
            <div class="poster-intro d-flex flex-column align-items-center text-center h-100 justify-content-center">
                <img src="/source/icons/vocal-icon.png" alt="Иконка вокального курса" class="profile-img fade-in-up">
                <h2 class="mt-2 fade-in-up pb-2" style="transition-delay: 100ms;">Вокал для продвинутых</h2>
                <!-- <p class="lead fade-in-up" style="transition-delay: 200ms;">От расслабления к силе голоса</p> -->
                <p class="bio fade-in-up" style="transition-delay: 300ms;">
                    Интерактивный план на 25 недель для продвинутых учеников. Расслабление, позиции пения, интонирование с акцентом на практику и юмор.
                </p>
                <div class="chart-container mt-4 fade-in-up" style="transition-delay: 400ms;">
                    <canvas id="progressChart"></canvas>
                </div>
                <p class="text-center text-sm subtle-text mt-2">Визуализация прогресса ключевых навыков.</p>
            </div>
        </header>

        <!-- ======================= RIGHT CONTENT PANEL ======================= -->
        <main id="content-main" class="col-lg-8 vh-100 pt-lg-3">
            
            <!-- Tabs Navigation for Blocks -->
            <div class="tabs-nav fade-in-up py-3">
                <button class="tab-link active" data-tab="all">Все недели</button>
                <button class="tab-link" data-tab="block1">Блок 1: Позиции</button>
                <button class="tab-link" data-tab="block2">Блок 2: Интонирование</button>
            </div>

            <!-- Tabs Content -->
            <div class="tabs-content sticky-top fade-in-up" style="transition-delay: 100ms;">
                
                <!-- All Weeks Pane -->
                <div id="all" class="tab-pane active">
                    <div id="week-selector" class="d-flex flex-wrap justify-content-center mb-4 week-selector"></div>
                    <div id="week-content" class="space-y-6"></div>
                </div>

                <!-- Block 1 Pane -->
                <div id="block1" class="tab-pane">
                    <div id="week-selector-block1" class="d-flex flex-wrap justify-content-center mb-4 week-selector"></div>
                    <div id="week-content-block1" class="space-y-6"></div>
                </div>

                <!-- Block 2 Pane -->
                <div id="block2" class="tab-pane">
                    <div id="week-selector-block2" class="d-flex flex-wrap justify-content-center mb-4 week-selector"></div>
                    <div id="week-content-block2" class="space-y-6"></div>
                </div>

            </div>
        </main>
    </div>
</div>

<script>
    const courseData = [
        {
            week: 1, block: 0, title: "Знакомство и фундамент",
            content: {
                goals: { title: "🎯 Цели урока", text: "Создать безопасную атмосферу. Понять философию курса. Освоить 'вокальный зевок'. Сделать первую запись голоса." },
                theory: { title: "📚 Теория", text: "Обзор курса. Краткий обзор голосового аппарата: 'Мотор' (Легкие/диафрагма), 'Вибратор' (Связки/гортань), 'Усилители' (Резонаторы). Объяснение, почему начинаем с тихого напевания для избежания зажимов." },
                practice: { title: "🎤 Практика", text: "1. Разминка: Артикуляционная гимнастика, потягивания шеи. \n2. Знакомство: Каждый 'пропевает' свое имя. \n3. Упражнение 'Вокальный зевок': Вызов настоящего зевка для ощущения пространства. \n4. Упражнение 'Выкрикивание Я': Освобождение звука без крика. \n5. Заминка: Тихое мычание." },
                homework: { title: "🏡 Домашнее задание и лайфхаки", text: "Лайфхак: 'Вокал — как йога для голоса'. Записывайте себя с первого дня для анализа. \nЗадание: 5 мин зевков, 5 мин тихого напевания на 'м-м-м', 5 мин записи и анализа." }
            }
        },
        {
            week: 2, block: 1, title: "Основы расслабления гортани",
            content: {
                goals: { title: "🎯 Цели урока", text: "Понять разницу между высокой и низкой позицией гортани. Научиться опускать гортань через 'зависший глоток'. Освоить звук 'НГ'." },
                theory: { title: "📚 Теория", text: "Гортань — 'домик' для связок. При напряжении она поднимается, пережимая звук. При зевке — опускается, создавая объем. Наша цель — стабильно низкая, расслабленная позиция." },
                practice: { title: "🎤 Практика", text: "1. Упражнение 'Лифт для гортани': Перед зеркалом с пальцем на кадыке 'зависаем' перед глотком. \n2. Упражнение 'Кинг-Конг' (звук 'НГ'): Напеваем на 'НГ' мелодии из 3-х нот. \n3. Работа в парах: Взаимный контроль напряжения шеи." },
                homework: { title: "🏡 Домашнее задание и лайфхаки", text: "Лайфхак: 'Представь, что у тебя во рту горячая картошка'. \nЗадание: 5 мин 'зависших глотков', 7 мин напевания гаммы на 'НГ', 3 мин записи." }
            }
        },
        {
            week: 3, block: 1, title: "Грудной резонатор",
            content: {
                goals: { title: "🎯 Цели урока", text: "Понять, что такое грудной резонатор. Научиться ощущать вибрацию в груди. Практиковать пение низких нот без зажимов." },
                theory: { title: "📚 Теория", text: "Грудной резонатор (трахея, бронхи) отвечает за низкие частоты, придавая звуку плотность и бархат. Нужно не 'толкать' звук вниз, а позволять ему вибрировать." },
                practice: { title: "🎤 Практика", text: "1. Упражнение 'Детектор вибрации': С ладонью на груди мычим на низких нотах, ища вибрацию. \n2. Упражнение 'Гравитация в помощь': Повторяем то же самое лежа на спине. \n3. Применение: Поем нисходящую гамму на 'моо'." },
                homework: { title: "🏡 Домашнее задание и лайфхаки", text: "Лайфхак: 'Грудь — твой барабан: начни тихо'. \nЗадание: 7 мин гаммы на 'моо' с рукой на груди, 5 мин чтения текста низким голосом, 3 мин записи." }
            }
        },
        {
            week: 4, block: 1, title: "Головной резонатор",
            content: {
                goals: { title: "🎯 Цели урока", text: "Понять, что такое головной резонатор. Ощутить вибрацию в области лица. Практиковать плавный переход от груди к голове." },
                theory: { title: "📚 Теория", text: "Головные резонаторы отвечают за высокие частоты, придавая звуку звонкость и полетность. Ощущения могут быть в 'маске' (вокруг носа), во лбу или затылке.\n\n"},
                practice: { title: "🎤 Практика", text: "1. Упражнение 'Комариный писк': Напеваем на 'н-н-н' или 'з-з-з' на высоких нотах, ища вибрацию на лице. \n2. Упражнение 'Качели': Скользим на октаву вверх-вниз на 'уи-и-и', делая переход 'бесшовным'. \n3. Применение: Поем восходящую гамму на 'мии'." },
                homework: { title: "🏡 Домашнее задание и лайфхаки", text: "Лайфхак: 'Голова — твой колокол. Не бей по нему, а дай зазвенеть'. \nЗадание: 7 мин 'сирены' на 'м', 5 мин восходящей гаммы на 'мии', 3 мин записи." }
            }
        },
        {
            week: 5, block: 1, title: "Фальцет и его контроль",
            content: {
                goals: { title: "🎯 Цели урока", text: "Понять физику фальцета. Отличить фальцет от головного голоса. Тренировать контроль над потоком воздуха." },
                theory: { title: "📚 Теория", text: "Фальцет — режим работы связок, когда они не смыкаются полностью, отчего в звуке много воздуха. Это полезный инструмент для развития контроля дыхания и снятия зажимов." },
                practice: { title: "🎤 Практика", text: "1. Упражнение 'Привидение': Напеваем высокий, воздушный звук 'у-у-у'.\n2. Упражнение 'Дуем на перо': Добавляем легкий фальцетный звук к ровному потоку воздуха.\n3. Скольжение: Скользим из грудного голоса в фальцет, чувствуя 'слом'.\n4. Мини-тест: Запись упражнения и самооценка." },
                homework: { title: "🏡 Домашнее задание и лайфхаки", text: "Лайфхак: 'Фальцет — как шепот ветра: не форсируй'.\nЗадание: 5 мин 'Привидения', 7 мин длинных нот фальцетом, 3 мин записи скольжения. Сравните запись с предыдущими неделями для оценки прогресса." }
            }
        },
        {
            week: 6, block: 1, title: "Фрай и расслабление связок (ч.1)",
            content: {
                goals: { title: "🎯 Цели урока", text: "Освоить технику вокального фрая (штробаса). Понять его пользу для расслабления. Научиться переходить из фрая в чистый тон." },
                theory: { title: "📚 Теория", text: "Вокальный фрай (vocal fry) — самый низкий режим работы связок, издающий 'скрип'. Это безопасно и полезно для снятия излишнего напряжения (гипертонуса)." },
                practice: { title: "🎤 Практика", text: "1. Упражнение 'Сонный зомби': Произносим лениво и низко 'а-а-а' до появления скрипа.\n2. Контролируемый фрай: Плавно переходим из фрая в чистый тон и обратно.\n3. Фрай как начало атаки: Начинаем каждую ноту гаммы с легкого фрая." },
                homework: { title: "🏡 Домашнее задание и лайфхаки", text: "Лайфхак: 'Звучит как зомби? Значит, правильно!'.\nЗадание: 7 мин перехода 'фрай <-> тон', 5 мин гаммы с атакой через фрай, 3 мин записи." }
            }
        },
        {
            week: 7, block: 1, title: "Фрай и расслабление связок (ч.2)",
            content: {
                goals: { title: "🎯 Цели урока", text: "Углубить освоение фрая. Интегрировать в ноты и мелодии. Практиковать переходы для лучшего расслабления." },
                theory: { title: "📚 Теория", text: "Повтор фрая: полезен для низкой позиции гортани и расслабления связок. Интеграция в мелодии помогает избежать зажимов в низких нотах." },
                practice: { title: "🎤 Практика", text: "1. Повтор 'Сонный зомби' с вариациями. \n2. Фрай в гаммах: Начинаем низкую гамму с фрая. \n3. Применение: Напеваем простую мелодию ('Happy Birthday' низко) с фрай-атакой на нотах." },
                homework: { title: "🏡 Домашнее задание и лайфхаки", text: "Лайфхак: 'Фрай — массаж для связок в действии'. \nЗадание: 7 мин фрай в гаммах, 5 мин мелодии с фраем, 3 мин записи и анализа." }
            }
        },
        {
            week: 8, block: 1, title: "Смешанные резонаторы (Микст) (ч.1)",
            content: {
                goals: { title: "🎯 Цели урока", text: "Понять концепцию микста. Практиковать упражнения, сглаживающие переходные ноты. Добиться ощущения цельного голоса." },
                theory: { title: "📚 Теория", text: "Микст — это техника смешивания грудного и головного резонанса. Позволяет петь в среднем диапазоне плотно и звонко, без 'слома' голоса." },
                practice: { title: "🎤 Практика", text: "1. Упражнение 'Капризный ребенок': Ноющий звук 'ня-ня-ня' для активации 'маски'.\n2. Упражнение 'Октавный скачок': Поем арпеджио, сохраняя плотность на верхней ноте.\n3. Работа в группе: Поем арпеджио по цепочке." },
                homework: { title: "🏡 Домашнее задание и лайфхаки", text: "Лайфхак: 'Микст — как коктейль: смешиваем резонаторы, а не взбалтываем'.\nЗадание: 7 мин арпеджио на 'ня', 5 мин гаммы на октаву на 'ма', 3 мин записи." }
            }
        },
        {
            week: 9, block: 1, title: "Смешанные резонаторы (Микст) (ч.2)",
            content: {
                goals: { title: "🎯 Цели урока", text: "Углубить микст. Добавить продвинутые упражнения. Ввести простую песню в миксте для ранней интеграции." },
                theory: { title: "📚 Теория", text: "Повтор микста: фокус на балансе в переходах. Ранняя интеграция в песни помогает закрепить навык." },
                practice: { title: "🎤 Практика", text: "1. Повтор 'Капризный ребенок' с вариациями. \n2. Арпеджио в миксте на разные слоги. \n3. Применение: Напеваем простую песню ('Twinkle Twinkle') в миксте, фокусируясь на переходах." },
                homework: { title: "🏡 Домашнее задание и лайфхаки", text: "Лайфхак: 'Волна звука от груди к голове в песне'. \nЗадание: 7 мин арпеджио, 5 мин песни в миксте, 3 мин записи." }
            }
        },
        {
            week: 10, block: 1, title: "Постановка тела и дыхания",
            content: {
                goals: { title: "🎯 Цели урока", text: "Освоить правильную певческую осанку. Отработать диафрагмальное дыхание. Научиться экономно расходовать воздух. Интегрировать в песню." },
                theory: { title: "📚 Теория", text: "Осанка: прямая спина, свободная шея. Диафрагмальное дыхание: при вдохе живот расширяется, на выдохе плавно подтягивается, создавая 'опору'." },
                practice: { title: "🎤 Практика", text: "1. Осанка: Встаем у стены, запоминая правильное положение.\n2. Упражнение 'Книга на животе': Лежа на спине, дышим так, чтобы книга поднималась и опускалась.\n3. Упражнение 'Ш-ш-ш': Тянем долгий, ровный звук на выдохе.\n4. Применение: Напеваем песню с фокусом на дыхании." },
                homework: { title: "🏡 Домашнее задание и лайфхаки", text: "Лайфхак: 'Тело — инструмент: стой ровно, дыши глубоко'.\nЗадание: 5 мин дыхания с книгой, 5 мин упражнения на 'с-с-с', 5 мин пения песни с контролем дыхания." }
            }
        },
        {
            week: 11, block: 1, title: "Объем и проекция",
            content: {
                goals: { title: "🎯 Цели урока", text: "Понять разницу между криком и проекцией. Научиться использовать резонаторы для создания объема. Практиковать 'посыл' звука в песне." },
                theory: { title: "📚 Теория", text: "Громкость создается не силой выдоха, а эффективностью резонанса. Ключ: опущенная гортань, поднятое мягкое нёбо, опертое дыхание." },
                practice: { title: "🎤 Практика", text: "1. Упражнение 'Купол': Поем на 'а-а-а', представляя во рту огромный собор.\n2. Упражнение 'Посыл звука': 'Бросаем' звук, как мячик, в стену.\n3. Групповые 'эхо'-игры: Одна группа поет фразу, вторая повторяет как эхо.\n4. Применение: Песня с объемом." },
                homework: { title: "🏡 Домашнее задание и лайфхаки", text: "Лайфхак: 'Объем — это не крик, а пространство'.\nЗадание: 5 мин пения с 'куполом', 7 мин 'посыла звука' в песне, 3 мин записи." }
            }
        },
        {
            week: 12, block: 1, title: "Ревизия позиций",
            content: {
                goals: { title: "🎯 Цели урока", text: "Повторить все темы первого блока. Провести самодиагностику. Получить обратную связь. Интегрировать в песню." },
                theory: { title: "📚 Теория", text: "Краткий обзор всех пройденных техник: расслабление гортани, резонаторы, фальцет, фрай, микст, дыхание, осанка. Все это — взаимосвязанные элементы." },
                practice: { title: "🎤 Практика", text: "1. Комплексная разминка: Проходим по всем ключевым упражнениям.\n2. Индивидуальная работа: Каждый исполняет распевку и говорит о своих сложностях.\n3. Работа в мини-группах: Взаимная обратная связь.\n4. Применение: Песня с позициями." },
                homework: { title: "🏡 Домашнее задание и лайфхаки", text: "Лайфхак: 'Собираем пазл: все позиции вместе'.\nЗадание: Составить собственную 20-минутную распевку из самых сложных упражнений. Сравнить запись в начале и конце недели." }
            }
        },
        {
            week: 13, block: 2, title: "Переход к интонации",
            content: {
                goals: { title: "🎯 Цели урока", text: "Ввести понятие интонации. Понять связь между позицией и чистотой звука. Начать использовать тюнер." },
                theory: { title: "📚 Теория", text: "Интонация — это точность звуковысотности. Если звук стабилен и хорошо срезонирован, им легче управлять. Тюнер — наш беспристрастный помощник." },
                practice: { title: "🎤 Практика", text: "1. Упражнение 'Калибровка': Тянем ноту на 'м', глядя на тюнер, чтобы удержать стрелку по центру.\n2. Упражнение 'Малые шаги': Поем интервал секунда (до-ре-до).\n3. Упражнение 'Третьи': Поем интервал терция (до-ми-до)." },
                homework: { title: "🏡 Домашнее задание и лайфхаки", text: "Лайфхак: 'Интонация — как прицел: сначала зафиксируй винтовку (позицию), потом целься'.\nЗадание: 7 мин 'калибровки' с тюнером, 5 мин пения терций, 3 мин записи." }
            }
        },
        {
            week: 14, block: 2, title: "Базовая интонация в напевах",
            content: {
                goals: { title: "🎯 Цели урока", text: "Научиться чисто петь мажорную гамму. Развить слуховой контроль. Практиковать интонацию без вибрато." },
                theory: { title: "📚 Теория", text: "Гамма — основа большинства мелодий. Умение чисто ее спеть — фундамент для чистого пения. Начинаем без вибрато, чтобы лучше слышать высоту." },
                practice: { title: "🎤 Практика", text: "1. Упражнение 'Лестница': Очень медленно поем мажорную гамму вверх и вниз на 'ма'.\n2. Работа в парах: Один поет, второй слушает и дает обратную связь.\n3. Гамма на разные слоги: 'ду', 'ди', 'ля'." },
                homework: { title: "🏡 Домашнее задание и лайфхаки", text: "Лайфхак: 'Начинай тихо — ошибки слышнее'.\nЗадание: 10 мин пения мажорной гаммы с тюнером, 5 мин записи." }
            }
        },
        {
            week: 15, block: 2, title: "Интонация в грудном регистре",
            content: {
                goals: { title: "🎯 Цели урока", text: "Научиться точно попадать в ноты в низком и среднем диапазоне. Применить контроль грудного резонатора. Освоить пение простых мелодий на слог 'ма'." },
                theory: { title: "📚 Теория", text: "Интонация - точность попадания в ноту. Стабильный звук в грудном резонаторе легче контролировать по высоте. Начинаем с привычного 'разговорного' диапазона." },
                practice: { title: "🎤 Практика", text: "1. Упражнение 'Снайпер': Поем ноту, глядя на тюнер, добиваясь, чтобы стрелка замерла по центру.\n2. 'Мелодические ступеньки': Поем короткие последовательности (до-ми-соль) на 'ма'.\n3. Применение: Разучиваем 'Happy Birthday' на 'ма'.\n4. Мини-тест: Запись и сравнение интонации." },
                homework: { title: "🏡 Домашнее задание и лайфхаки", text: "Лайфхак: 'Низы — это фундамент вашего вокального дома'.\nЗадание: 7 мин настройки с тюнером, 10 мин медленного пения мелодии, 3 мин записи. Сравните с предыдущими для оценки прогресса." }
            }
        },
        {
            week: 16, block: 2, title: "Интонация в головном регистре",
            content: {
                goals: { title: "🎯 Цели урока", text: "Развить контроль интонации на высоких нотах. Научиться не 'завышать' и не 'низить'. Практиковать чистое пение арпеджио." },
                theory: { title: "📚 Теория", text: "На высоких нотах связки натягиваются сильнее, контроль усложняется. Ключ к успеху — хороший головной резонанс и стабильное дыхание, а не давление." },
                practice: { title: "🎤 Практика", text: "1. 'Точный выстрел вверх': Поем интервал октавы на 'уи!', сверяя верхнюю ноту по тюнеру.\n2. 'Арпеджио в голове': Поем арпеджио в высоком регистре на 'нги'.\n3. Применение: Поем 'Happy Birthday' на октаву выше." },
                homework: { title: "🏡 Домашнее задание и лайфхаки", text: "Лайфхак: 'Верха — как стекло: не тресни!'.\nЗадание: 7 мин арпеджио в высоком регистре, 5 мин длинных высоких нот с тюнером, 3 мин записи." }
            }
        },
        {
            week: 17, block: 2, title: "Интонация в фальцете",
            content: {
                goals: { title: "🎯 Цели урока", text: "Научиться интонировать в фальцетном режиме. Управлять высотой при слабом смыкании связок. Практиковать интервалы в фальцете." },
                theory: { title: "📚 Теория", text: "Нестабильный звук фальцета требует очень точного контроля дыхания для удержания ноты. Это отличное упражнение для тонкой мышечной координации." },
                practice: { title: "🎤 Практика", text: "1. 'Фальцетная калибровка': Тянем длинные ноты фальцетом на 'у', глядя на тюнер.\n2. 'Интервалы фальцетом': Поем терции и квинты.\n3. 'Фальцетная мелодия': Поем 'Twinkle, Twinkle, Little Star' фальцетом." },
                homework: { title: "🏡 Домашнее задание и лайфхаки", text: "Лайфхак: 'Фальцет — полет: лети точно'.\nЗадание: 5 мин длинных нот фальцетом с тюнером, 7 мин пения интервалов, 3 мин записи." }
            }
        },
        {
            week: 18, block: 2, title: "Интонация во фрае и миксте",
            content: {
                goals: { title: "🎯 Цели урока", text: "Использовать фрай как отправную точку для точной интонации. Тренировать чистое пение на переходных нотах. Добиться ровного интонирования." },
                theory: { title: "📚 Теория", text: "Начало ноты с фрая помогает связкам найти координацию в расслабленном состоянии. В миксте важен баланс, чтобы интонация не 'сползала'." },
                practice: { title: "🎤 Практика", text: "1. 'Фрай-атака': Поем гамму, начиная каждую ноту с фрая.\n2. 'Микстовая гамма': Поем гамму на 1.5-2 октавы на 'гу-гу-гу', уделяя внимание середине.\n3. 'Проблемные ноты': Индивидуальная отработка." },
                homework: { title: "🏡 Домашнее задание и лайфхаки", text: "Лайфхак: 'Фрай — твой камертон для расслабления'.\nЗадание: 7 мин гаммы через переходные ноты, 5 мин отработки своей 'проблемной' ноты, 3 мин записи." }
            }
        },
        {
            week: 19, block: 2, title: "Групповая интонация",
            content: {
                goals: { title: "🎯 Цели урока", text: "Развить умение слушать партнеров. Практиковать пение в унисон. Попробовать петь двухголосные гармонии." },
                theory: { title: "📚 Теория", text: "Пение в группе — это умение слышать других и подстраивать свою интонацию и тембр под общее звучание. Это развивает музыкальный слух." },
                practice: { title: "🎤 Практика", text: "1. Упражнение 'Зеркало': В парах, один поет фразу, второй точно повторяет.\n2. Пение в унисон: Поем песню, добиваясь слитного звучания.\n3. Двухголосие: Одна группа поет тонику, вторая — терцию выше." },
                homework: { title: "🏡 Домашнее задание и лайфхаки", text: "Лайфхак: 'Группа — это оркестр: слушай других больше, чем себя'.\nЗадание: Пойте вместе с записью, стараясь слиться с голосом исполнителя." }
            }
        },
        {
            week: 20, block: 2, title: "Интонация с динамикой",
            content: {
                goals: { title: "🎯 Цели урока", text: "Освоить crescendo и diminuendo. Сохранять интонацию при изменении громкости. Применять динамику для эмоций." },
                theory: { title: "📚 Теория", text: "Динамика делает исполнение живым. Частая ошибка: при crescendo нота 'ползет' вверх, при diminuendo — вниз. Избежать этого помогает опора дыхания." },
                practice: { title: "🎤 Практика", text: "1. Упражнение 'Волна': На одной ноте делаем crescendo и diminuendo, следя за тюнером.\n2. 'Динамика в гамме': Вверх с crescendo, вниз с diminuendo.\n3. 'Эмоциональная динамика': Произносим фразу с разной громкостью." },
                homework: { title: "🏡 Домашнее задание и лайфхаки", text: "Лайфхак: 'Динамика — это эмоции: расти плавно'.\nЗадание: 10 мин упражнения 'Волна', 5 мин пения мелодии с динамическими оттенками." }
            }
        },
        {
            week: 21, block: 2, title: "Интонация в простых песнях",
            content: {
                goals: { title: "🎯 Цели урока", text: "Начать разучивать первую простую песню. Отработать интонацию в контексте мелодии и слов. Соединить технику с музыкой." },
                theory: { title: "📚 Теория", text: "Переход к песням добавляет сложности: артикуляция, ритм, фразировка. Важно не забывать про техническую базу. Начинаем с напевания на один слог." },
                practice: { title: "🎤 Практика", text: "1. Выбор песни: Выбираем одну из 2-3 простых песен.\n2. Разбор мелодии: Разучиваем куплет по фразам на слог 'ма'.\n3. Работа со словами: Медленно поем со словами, следя за позицией." },
                homework: { title: "🏡 Домашнее задание и лайфхаки", text: "Лайфхак: 'Песня — это тест: интегрируй всё, что знаешь'.\nЗадание: 10 мин напевания на 'ма', 10 мин пения со словами, запись и анализ." }
            }
        },
        {
            week: 22, block: 2, title: "Вибрато и интонация",
            content: {
                goals: { title: "🎯 Цели урока", text: "Понять природу естественного вибрато. Отличить его от 'качания' голоса. Выполнить упражнения на освобождение вибрато." },
                theory: { title: "📚 Теория", text: "Вибрато — естественная пульсация высоты звука, признак свободного голоса. Его не нужно 'делать', нужно создать условия для его появления." },
                practice: { title: "🎤 Практика", text: "1. 'Толчок и отклик': На длинной ноте делаем легкий толчок диафрагмой и слушаем отклик.\n2. 'На грани': В конце diminuendo, когда звук почти затухает, может появиться вибрато.\n3. Применение: Добавляем вибрато на длинных нотах в песне." },
                homework: { title: "🏡 Домашнее задание и лайфхаки", text: "Лайфхак: 'Вибрато — это приправа, а не основное блюдо'.\nЗадание: 10 мин 'Толчка и отклика', 5 мин пения длинных нот в песне с вибрато." }
            }
        },
        {
            week: 23, block: 2, title: "Импровизация и ревизия интонации",
            content: {
                goals: { title: "🎯 Цели урока", text: "Сделать первые шаги в импровизации. Развить связь 'слышу-пою'. Повторить темы второго блока. Провести самодиагностику интонации." },
                theory: { title: "📚 Теория", text: "Импровизация — создание музыки в реальном времени. Краткий обзор тем: интонация в регистрах, в группе, с динамикой, вибрато." },
                practice: { title: "🎤 Практика", text: "1. 'Вопрос-ответ': В парах, один поет фразу-'вопрос', второй — фразу-'ответ'.\n2. 'Импровизация на 3 ноты': Поем на 'ля'.\n3. Комплексная разминка: Гаммы с тюнером, арпеджио, вибрато.\n4. 'Экзамен' для себя: Исполнение а капелла." },
                homework: { title: "🏡 Домашнее задание и лайфхаки", text: "Лайфхак: 'В импровизации нет ошибок'.\nЗадание: Импров на музыку. Отрабатывайте сложные фразы с тюнером." }
            }
        },
        {
            week: 24, block: 2, title: "Интеграция: Песни с позициями",
            content: {
                goals: { title: "🎯 Цели урока", text: "Исполнять песню с полным осознанием техники. Применять нужные 'позиции' в разных частях песни. Познакомиться с базовыми стилистическими приемами." },
                theory: { title: "📚 Теория", text: "Финальный этап — думать как музыкант. Краткий обзор техник: Бэлтинг, Субтон. Анализируем песню с точки зрения позиций." },
                practice: { title: "🎤 Практика", text: "1. 'Технический разбор песни': 'Размечаем' по позициям.\n2. 'Работа над фразировкой': Где вдох?\n3. 'Пробуем бэлтинг': На 'НЭЙ!'.\n4. 'Генеральная репетиция': Исполнение перед группой." },
                homework: { title: "🏡 Домашнее задание и лайфхаки", text: "Лайфхак: 'Экспериментируй с стилем'.\nЗадание: Пойте песню с фокусом на технике и эмоциях." }
            }
        },
        {
            week: 25, block: 0, title: "Финал и взгляд в будущее",
            content: {
                goals: { title: "🎯 Цели урока", text: "Продемонстрировать полученные навыки. Получить и дать обратную связь. Обобщить материал. Создать план для дальнейшего развития." },
                theory: { title: "📚 Теория", text: "Подводим итоги. Вспоминаем наш путь от зевка до песни. Обсуждаем гигиену голоса." },
                practice: { title: "🎤 Практика", text: "1. Общая разминка: Лучшие упражнения со всего курса.\n2. 'Групповые выступления': Каждый исполняет фрагмент песни. Это праздник, не экзамен!\n3. Обсуждение и рефлексия.\n4. 'Праздничное напевание': Поем все вместе.\n5. Финальный тест: Запись выступления и сравнение с началом курса." },
                homework: { title: "🏡 Домашнее задание и лайфхаки", text: "Лайфхак: 'Продолжайте записывать себя!'.\nЗадание: Составьте короткую (15-20 минут) ежедневную рутину для самостоятельных занятий. Сравните все записи для оценки роста." }
            }
        }
    ];

    document.addEventListener('DOMContentLoaded', function() {
        const tabLinks = document.querySelectorAll('.tab-link');
        const tabPanes = document.querySelectorAll('.tab-pane');
        const tabsContent = document.querySelector('.tabs-content');
        const tabsNav = document.querySelector('.tabs-nav')

        const switchTab = (targetTabId) => {
            const currentActivePane = document.querySelector('.tab-pane.active');
            const targetPane = document.getElementById(targetTabId);

            if (currentActivePane === targetPane) return;

            if (currentActivePane) {
                currentActivePane.classList.add('exiting');
                currentActivePane.addEventListener('transitionend', function handler() {
                    this.removeEventListener('transitionend', handler);
                    this.classList.remove('active', 'exiting');
                });
            }

            if (targetPane) {
                targetPane.classList.add('active', 'entering');
                setTimeout(() => {
                    targetPane.classList.remove('entering');
                }, 10);
            }

            tabLinks.forEach(link => {
                link.classList.toggle('active', link.dataset.tab === targetTabId);
            });

            renderWeekSelector(targetTabId);
        };

        tabsNav.addEventListener('click', (event) => {
            if (event.target.classList.contains('tab-link')) {
                const targetTabId = event.target.dataset.tab;
                switchTab(targetTabId);
            }
        });

        // Swipe logic
        let touchStartX = 0;
        let touchEndX = 0;
        const swipeThreshold = 50;

        tabsContent.addEventListener('touchstart', (event) => {
            touchStartX = event.changedTouches[0].screenX;
        }, { passive: true });

        tabsContent.addEventListener('touchend', (event) => {
            touchEndX = event.changedTouches[0].screenX;
            handleSwipe();
        });

        const handleSwipe = () => {
            const deltaX = touchEndX - touchStartX;
            if (Math.abs(deltaX) < swipeThreshold) return;

            const currentActiveLink = document.querySelector('.tab-link.active');
            let currentActiveIndex = -1;

            tabLinks.forEach((link, index) => {
                if (link === currentActiveLink) currentActiveIndex = index;
            });

            let newIndex;
            if (deltaX < 0) { // left
                newIndex = (currentActiveIndex + 1) % tabLinks.length;
            } else { // right
                newIndex = (currentActiveIndex - 1 + tabLinks.length) % tabLinks.length;
            }

            const newTabId = tabLinks[newIndex].dataset.tab;
            switchTab(newTabId);
        };

        // Week rendering functions
        let activeWeek = 1;

        function renderWeekSelector(filterBlock = 'all') {
            const selectorId = filterBlock === 'all' ? 'week-selector' : `week-selector-${filterBlock}`;
            const contentId = filterBlock === 'all' ? 'week-content' : `week-content-${filterBlock}`;
            const weekSelector = document.getElementById(selectorId);
            const weekContent = document.getElementById(contentId);
            weekSelector.innerHTML = '';

            const filteredData = courseData.filter(item => {
                if (filterBlock === 'all') return true;
                if (filterBlock === 'block1') return item.block === 1 || item.week === 1;
                if (filterBlock === 'block2') return item.block === 2 || item.week === 25;
                return false;
            });

            filteredData.forEach(item => {
                const button = document.createElement('button');
                button.dataset.week = item.week;
                button.textContent = item.week;
                let bgClass = 'btn-outline-secondary';
                if (item.block === 1) bgClass = 'btn-outline-info';
                if (item.block === 2) bgClass = 'btn-outline-warning';

                button.className = `btn ${bgClass} rounded-circle`;
                if (item.week === activeWeek) button.classList.add('active-week');

                button.addEventListener('click', () => {
                    activeWeek = item.week;
                    renderWeekContent(item.week, contentId);
                    updateActiveWeekButton(filterBlock);
                });
                weekSelector.appendChild(button);
            });

            // Initial content
            renderWeekContent(activeWeek, contentId);
        }

        function updateActiveWeekButton(filterBlock) {
            const selectorId = filterBlock === 'all' ? 'week-selector' : `week-selector-${filterBlock}`;
            document.querySelectorAll(`#${selectorId} .btn`).forEach(btn => {
                btn.classList.remove('active-week');
                if (parseInt(btn.dataset.week) === activeWeek) btn.classList.add('active-week');
            });
        }

        function renderWeekContent(weekNumber, contentId) {
            const data = courseData.find(item => item.week === weekNumber);
            if (!data) return;

            const weekContent = document.getElementById(contentId);
            weekContent.innerHTML = '';

            const titleCard = document.createElement('div');
            titleCard.className = "text-center p-4";
            titleCard.innerHTML = `
                <h2 class="mb-0">Неделя ${data.week}: ${data.title}</h2>
            `;
            weekContent.appendChild(titleCard);

            const row = document.createElement('div');
            row.className = "row g-4";

            Object.values(data.content).forEach(section => {
                const col = document.createElement('div');
                col.className = "col-md-6";
                const card = document.createElement('div');
                card.className = "content-card h-100";
                card.innerHTML = `
                    <h3 class="card-title mb-3">${section.title}</h3>
                    <p class="whitespace-pre-line">${section.text}</p>
                `;
                col.appendChild(card);
                row.appendChild(col);
            });
            weekContent.appendChild(row);
        }

        // Initial render
        renderWeekSelector('all');

        // Chart
        const ctx = document.getElementById('progressChart').getContext('2d');
        const labels = Array.from({length: 25}, (_, i) => `Н${i + 1}`);

        const techniqueData = [0, 5, 10, 15, 20, 25, 30, 35, 45, 55, 60, 65, 65, 65, 65, 65, 65, 65, 70, 70, 70, 75, 80, 85, 90];
        const intonationData = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 5, 15, 25, 35, 45, 55, 65, 75, 80, 85, 90, 93, 95, 97, 100];

        new Chart(ctx, {
            type: 'line',
            data: {
                labels: labels,
                datasets: [{
                    label: 'Техника Позиций',
                    data: techniqueData,
                    borderColor: "var(--primary-color)",
                    backgroundColor: 'rgba(179, 12, 0, 0.1)',
                    fill: true,
                    tension: 0.4
                }, {
                    label: 'Точность Интонации',
                    data: intonationData,
                    borderColor: '#f59e0b',
                    backgroundColor: 'rgba(245, 158, 11, 0.1)',
                    fill: true,
                    tension: 0.4
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: true,
                        max: 100,
                        title: { display: true, text: 'Уровень освоения (%)' }
                    },
                    x: {
                        title: { display: true, text: 'Недели курса' }
                    }
                },
                plugins: {
                    legend: { position: 'top' },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                let label = context.dataset.label || '';
                                if (label) label += ': ';
                                if (context.parsed.y !== null) label += context.parsed.y + '%';
                                return label;
                            }
                        }
                    }
                }
            }
        });

        // Animation observer
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                    observer.unobserve(entry.target);
                }
            });
        }, { threshold: 0.1 });

        document.querySelectorAll('.fade-in-up').forEach(el => observer.observe(el));
    });
</script>

</body>
</html>